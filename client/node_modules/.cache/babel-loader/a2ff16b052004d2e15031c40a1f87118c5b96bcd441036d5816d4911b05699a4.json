{"ast":null,"code":"import'./settings.css';import Sidebar from'../../components/sidebar/Sidebar';import{useContext,useState}from'react';import{Context}from\"../../context/Context\";import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Settings(){const[file,setFile]=useState(null);const[username,setUsername]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[success,setSuccess]=useState(false);const{user,dispatch}=useContext(Context);const PF=\"http://localhost:5000/images/\";const handleSubmit=async e=>{e.preventDefault();dispatch({type:\"UPDATE_START\"});const updatedUser={userId:user._id,email,password};if(file){const data=new FormData();const filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);updatedUser.profilePic=filename;try{await axios.post(\"/upload\",data);}catch(err){}}try{const res=await axios.put(\"/users/\"+user._id,updatedUser);setSuccess(true);dispatch({type:\"UPDATE_SUCCESS\",payload:res.data});}catch(err){dispatch({type:\"UPDATE_FAILURE\"});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settingsTitle\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"settingsUpdateTitle\",children:\"Update Your Account\"}),/*#__PURE__*/_jsx(\"span\",{className:\"settingsDeleteTitle\",children:\"Delete Account\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"settingsForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Profile Picture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"settingsPP\",children:[/*#__PURE__*/_jsx(\"img\",{src:file?URL.createObjectURL(file):PF+user.profilePic,alt:\"\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"settingsPPIcon fa-regular fa-circle-user\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:'none'},onChange:e=>setFile(e.target.files[0])})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:user.username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:user.email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"settingsSubmit\",type:\"submit\",children:\"Update\"}),success&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\",textAlign:\"center\",margin:'20px'},children:\"Profile got Updated\"})]})]}),/*#__PURE__*/_jsx(Sidebar,{})]});}","map":{"version":3,"names":["Sidebar","useContext","useState","Context","axios","jsx","_jsx","jsxs","_jsxs","Settings","file","setFile","username","setUsername","email","setEmail","password","setPassword","success","setSuccess","user","dispatch","PF","handleSubmit","e","preventDefault","type","updatedUser","userId","_id","data","FormData","filename","Date","now","name","append","profilePic","post","err","res","put","payload","className","children","onSubmit","src","URL","createObjectURL","alt","htmlFor","id","style","display","onChange","target","files","placeholder","value","color","textAlign","margin"],"sources":["C:/Users/ASUS/OneDrive/Desktop/react-blog/client/src/pages/settings/Settings.jsx"],"sourcesContent":["import './settings.css'\r\nimport Sidebar from '../../components/sidebar/Sidebar'\r\nimport { useContext,useState } from 'react'\r\nimport { Context } from \"../../context/Context\"\r\nimport axios from 'axios'\r\n\r\nexport default function Settings() {\r\n  const [file, setFile] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [success,setSuccess] = useState(false)\r\n\r\n  const { user,dispatch } = useContext(Context);\r\n  const PF = \"http://localhost:5000/images/\"\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch({type: \"UPDATE_START\"})\r\n    const updatedUser = {\r\n      userId: user._id,\r\n      email,\r\n      password,\r\n    };\r\n    if (file) {\r\n      const data = new FormData();\r\n      const filename = Date.now() + file.name;\r\n      data.append(\"name\", filename);\r\n      data.append(\"file\", file);\r\n      updatedUser.profilePic = filename;\r\n      try {\r\n        await axios.post(\"/upload\", data);\r\n      } catch (err) {}\r\n    }\r\n    try {\r\n        const res = await axios.put(\"/users/\"+ user._id,updatedUser);\r\n        setSuccess(true);\r\n        dispatch({type: \"UPDATE_SUCCESS\",payload:res.data})\r\n    } catch (err) {\r\n      dispatch({type: \"UPDATE_FAILURE\"})\r\n    }\r\n  };\r\n  return (\r\n    <div className='settings'>\r\n      <div className=\"settingsWrapper\">\r\n        <div className=\"settingsTitle\">\r\n          <span className='settingsUpdateTitle'>Update Your Account</span>\r\n          <span className='settingsDeleteTitle'>Delete Account</span>\r\n        </div>\r\n        <form className=\"settingsForm\" onSubmit={handleSubmit}>\r\n          <label>Profile Picture</label>\r\n          <div className=\"settingsPP\">\r\n            <img\r\n              src={file ? URL.createObjectURL(file) : PF+user.profilePic}\r\n              alt=\"\"\r\n            />\r\n            <label htmlFor=\"fileInput\">\r\n              <i className=\"settingsPPIcon fa-regular fa-circle-user\"></i>\r\n            </label>\r\n            <input type=\"file\" \r\n              id='fileInput' \r\n              style={{display:'none'}}\r\n              onChange={(e) => setFile(e.target.files[0])}\r\n            />\r\n          </div>\r\n          <label>Username</label>\r\n          <input type=\"text\" \r\n            placeholder={user.username}\r\n            onChange={e=>setUsername(e.target.value)}  \r\n          />\r\n          <label>Email</label>\r\n          <input type=\"email\" \r\n            placeholder={user.email}\r\n            onChange={e=>setEmail(e.target.value)}\r\n          />\r\n          <label>Password</label>\r\n          <input type=\"password\" \r\n           onChange={e=>setPassword(e.target.value)}\r\n          />\r\n          <button className=\"settingsSubmit\" type=\"submit\">Update\r\n          </button>\r\n          {success && <span style={{color: \"green\", textAlign:\"center\",margin: '20px'}}>Profile got Updated</span>}\r\n        </form>\r\n      </div>\r\n      <Sidebar />\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}