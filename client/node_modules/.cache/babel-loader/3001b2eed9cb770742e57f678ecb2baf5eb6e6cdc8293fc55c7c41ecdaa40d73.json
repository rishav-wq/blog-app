{"ast":null,"code":"import{useContext,useState}from\"react\";import\"./write.css\";import axios from\"axios\";import{Context}from\"../../context/Context\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Write(){const[title,setTitle]=useState(\"\");const[desc,setDesc]=useState(\"\");const[file,setFile]=useState(null);const{user}=useContext(Context);const handleSubmit=async e=>{e.preventDefault();const newPost={username:user.username,title,desc};if(file){const data=new FormData();const filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);newPost.photo=filename;try{await axios.post(\"/upload\",data);}catch(err){}}try{const res=await axios.post(\"/posts\",newPost);window.location.replace(\"/post/\"+res.data._id);}catch(err){}};return/*#__PURE__*/_jsxs(\"div\",{className:\"write\",children:[file&&/*#__PURE__*/_jsx(\"img\",{className:\"writeImg\",src:URL.createObjectURL(file),alt:\"\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"writeForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"writeIcon fas fa-plus\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",className:\"writeInput\",autoFocus:true,onChange:e=>setTitle(e.target.value)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Tell your story...\",type:\"text\",className:\"writeInput writeText\",onChange:e=>setDesc(e.target.value)})}),/*#__PURE__*/_jsx(\"button\",{className:\"writeSubmit\",type:\"submit\",children:\"Publish\"})]})]});}","map":{"version":3,"names":["useContext","useState","axios","Context","jsx","_jsx","jsxs","_jsxs","Write","title","setTitle","desc","setDesc","file","setFile","user","handleSubmit","e","preventDefault","newPost","username","data","FormData","filename","Date","now","name","append","photo","post","err","res","window","location","replace","_id","className","children","src","URL","createObjectURL","alt","onSubmit","htmlFor","type","id","style","display","onChange","target","files","placeholder","autoFocus","value"],"sources":["C:/Users/ASUS/OneDrive/Desktop/react-blog/client/src/pages/write/Write.jsx"],"sourcesContent":["import { useContext, useState } from \"react\";\r\nimport \"./write.css\";\r\nimport axios from \"axios\";\r\nimport { Context } from \"../../context/Context\";\r\n\r\nexport default function Write() {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [desc, setDesc] = useState(\"\");\r\n  const [file, setFile] = useState(null);\r\n  const { user } = useContext(Context);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      username: user.username,\r\n      title,\r\n      desc,\r\n    };\r\n    if (file) {\r\n      const data =new FormData();\r\n      const filename = Date.now() + file.name;\r\n      data.append(\"name\", filename);\r\n      data.append(\"file\", file);\r\n      newPost.photo = filename;\r\n      try {\r\n        await axios.post(\"/upload\", data);\r\n      } catch (err) {}\r\n    }\r\n    try {\r\n      const res = await axios.post(\"/posts\", newPost);\r\n      window.location.replace(\"/post/\" + res.data._id);\r\n    } catch (err) {}\r\n  };\r\n  return (\r\n    <div className=\"write\">\r\n      {file && (\r\n        <img className=\"writeImg\" src={URL.createObjectURL(file)} alt=\"\" />\r\n      )}\r\n      <form className=\"writeForm\" onSubmit={handleSubmit}>\r\n        <div className=\"writeFormGroup\">\r\n          <label htmlFor=\"fileInput\">\r\n            <i className=\"writeIcon fas fa-plus\"></i>\r\n          </label>\r\n          <input\r\n            type=\"file\"\r\n            id=\"fileInput\"\r\n            style={{ display: \"none\" }}\r\n            onChange={(e) => setFile(e.target.files[0])}\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Title\"\r\n            className=\"writeInput\"\r\n            autoFocus={true}\r\n            onChange={e=>setTitle(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"writeFormGroup\">\r\n          <textarea\r\n            placeholder=\"Tell your story...\"\r\n            type=\"text\"\r\n            className=\"writeInput writeText\"\r\n            onChange={e=>setDesc(e.target.value)}\r\n          ></textarea>\r\n        </div>\r\n        <button className=\"writeSubmit\" type=\"submit\">\r\n          Publish\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}